<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scalar Speed Demo (Filtered + km/h)</title>
<style>
  body { font-family: sans-serif; padding: 20px; }
  pre { background: #eee; padding: 10px; white-space: pre-wrap; }
  button { padding: 10px 20px; font-size: 16px; margin: 5px; }
</style>
</head>
<body>

<h2>Scalar Speed Demo (Filtered + km/h)</h2>

<button id="enable">Enable Sensors</button>
<button id="cal" disabled>CALIBRATE GRAVITY</button>
<button id="zero" disabled>ZERO VELOCITY</button>

<pre id="out">Press Enableâ€¦</pre>

<script>
let lastTime = null;
let velocity = 0;     // m/s
let g_cal = 9.81;     // calibrated gravity

// moving average filter buffer
const FILTER_SIZE = 8;               // You can adjust this
let magBuffer = Array(FILTER_SIZE).fill(9.81);
let magIndex = 0;

let lastAccelMag = 9.81;

// ZERO VELOCIT
